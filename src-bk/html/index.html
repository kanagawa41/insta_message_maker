<!DOCTYPE HTML>
<!--
	Strongly Typed by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>インスタメッセージメーカー</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../assets/css/main.css" />
	</head>
	<body class="homepage is-preload">
		<div id="page-wrapper">

			<!-- Header -->
				<section id="header">
					<div class="container">

						<!-- Logo -->
							<h1 id="logo"><a href="index.html">Insta message maker</a></h1>
							<p>テaスト</p>

						<!-- Nav -->
<!-- 
							<nav id="nav">
								<ul>
									<li><a class="icon fa-home" href="index.html"><span>Introduction</span></a></li>
									<li>
										<a href="#" class="icon fa-bar-chart-o"><span>Dropdown</span></a>
										<ul>
											<li><a href="#">Lorem ipsum dolor</a></li>
											<li><a href="#">Magna phasellus</a></li>
											<li><a href="#">Etiam dolore nisl</a></li>
											<li>
												<a href="#">Phasellus consequat</a>
												<ul>
													<li><a href="#">Magna phasellus</a></li>
													<li><a href="#">Etiam dolore nisl</a></li>
													<li><a href="#">Phasellus consequat</a></li>
												</ul>
											</li>
											<li><a href="#">Veroeros feugiat</a></li>
										</ul>
									</li>
									<li><a class="icon fa-cog" href="left-sidebar.html"><span>Left Sidebar</span></a></li>
									<li><a class="icon fa-retweet" href="right-sidebar.html"><span>Right Sidebar</span></a></li>
									<li><a class="icon fa-sitemap" href="no-sidebar.html"><span>No Sidebar</span></a></li>
								</ul>
							</nav>
 -->
					</div>
				</section>

			<!-- Main -->
				<section id="main">
					<div class="container">
						<div class="row">

							<!-- Content -->
								<div id="content" class="col-8 col-12-medium">

									<!-- Post -->
										<article class="box post">
											<section>
												<form method="post" action="#">
													<div class="row gtr-50">
														<div class="col-12">
															<h3>ヘッダー</h3>
															<textarea name="header" placeholder="Message"></textarea>
														</div>
														<div class="col-12">
															<h3>メイン</h3>
															<textarea name="main" placeholder="Message"></textarea>
														</div>
														<div class="col-12">
															<h3>フッター</h3>
															<textarea name="footer" placeholder="Message"></textarea>
														</div>
														<div class="col-12">
															<a href="#" id="form-button-submit" class="form-button-submit button icon fa-envelope" onclick="return false;">Make</a>
														</div>
														<div class="col-12">
															<h3>作成されたメッセージ</h3>
															<textarea name="make-message" placeholder="Message"></textarea>
														</div>
													</div>
												</form>
											</section>
										</article>
								</div>

							<!-- Sidebar -->
								<div id="sidebar" class="col-4 col-12-medium">

									<!-- Excerpts -->
										<section>
											<ul class="divided">
												<li>

														<article class="box excerpt">
															<header>
																<span class="date">^\n$</span>
																<h3>空白改行の代わり</h3>
															</header>
															<form method="post" action="#">
																<div class="row gtr-50">
																	<div class="col-12">
																		<input name="new-line" placeholder="例:「・」「.」「　(大文字空白)」などを入力" type="text">
																	</div>
																</div>
															</form>
														</article>

												</li>
												<li>

														<article class="box excerpt">
															<header>
																<span class="date">##tags##</span>
																<h3>タグを埋め込む</h3>
															</header>
															<form method="post" action="#">
																<div class="row gtr-50">
																	<div class="col-12">
																		<input name="tags" placeholder="カンマ(,)区切りでタグを入力" type="text">
																		<ul class="icons">
																			<li id="chk-random-order" class="checkbox icon fa-check">
																			  タグの順番をランダム
																			</li>
																		</ul>
																		<ul class="icons checkbox">
																			<li id="chk-random-select" class="checkbox icon fa-check">
																			  タグをランダムに選択する
																			</li>
																		</ul>
																	</div>
																</div>
															</form>
														</article>

												</li>
												<li>

													<!-- Excerpt -->
														<article class="box excerpt">
															<header>
																<span class="date">July 24</span>
																<h3><a href="#">One more post</a></h3>
															</header>
															<p>Lorem ipsum dolor odio facilisis convallis. Etiam non nunc vel est
															suscipit convallis non id orci lorem ipsum sed magna consequat feugiat lorem dolore.</p>
														</article>

												</li>
											</ul>
										</section>

								</div>

						</div>
					</div>
				</section>

			<!-- Footer -->
				<section id="footer">
					<div id="copyright" class="container">
						<ul class="links">
							<li>&copy; Insta message maker. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
						</ul>
					</div>
				</section>

		</div>

		<!-- Scripts -->
			<script src="../assets/js/jquery.min.js"></script>
			<script src="../assets/js/jquery.dropotron.min.js"></script>
			<script src="../assets/js/browser.min.js"></script>
			<script src="../assets/js/breakpoints.min.js"></script>
<!--
			<script src="../assets/js/util.js"></script>
-->
  		<script src="../assets/js/main.js"></script>

  		<script>
			(function($) {
				function init(){
					// チェックボックスを作成
					$('.checkbox').each(function(i, element){
						$(element).on('click', function(){
							if($(this).hasClass('fa-check')){
								$(this).removeClass('fa-check');
								$(this).addClass('fa-remove');
							}else{
								$(this).removeClass('fa-remove');
								$(this).addClass('fa-check');
							}
						});
					});

					$('#form-button-submit').on('click', function(){
						var headerMessage = $('textarea[name="header"]').val();
						var mainMessage = $('textarea[name="main"]').val();
						var footerMessage = $('textarea[name="footer"]').val();

						var makeMessage = replacer(headerMessage) + replacer(mainMessage) + replacer(footerMessage);
						$('textarea[name="make-message"]').val(makeMessage);
					});
				}

				function replacer(str){
					str = replaceNewLine(str);

					if(hasTags(str)){
						str = replaceTags(str);
					}

					return str;
				}

				/**
				 * 改行を指定の文字列に変換
				 */
				function replaceNewLine(str){
					var newLine = $('input[name="new-line"]').val();
					var lines = str.split(/\r?\n/g);
					lines.forEach(function(val, i, ar){
						if(val.length == 0){
							ar[i] = newLine;
						}
					});

					return lines.join('\n');
				}

				/**
				 * タグを持っているか？
				 */
				function hasTags(str){
					return str.match(/##TAGS##/);
				}

				/**
				 * タグコードをタグに変換
				 */
				function replaceTags(str){
					var rawTagsStr = $('input[name="tags"]').val();
					var tags = rawTagsStr.split(',');

					if($('#chk-random-order').hasClass('fa-check')){
						function shuffleAry(ary) {
						  var i = ary.length;
						  while(i){
						    var j = Math.floor(Math.random()*i);
						    var t = ary[--i];
						    ary[i] = ary[j];
						    ary[j] = t;
						  }
  						return ary;
						}

						tags = shuffleAry(tags);
					}

					var tagsStr = '#' + tags.join(' #'); // #tag #tag...

					return str.replace(/##TAGS##/g, tagsStr);
				}

				init();
			})(jQuery);
  		</script>

	</body>
</html>